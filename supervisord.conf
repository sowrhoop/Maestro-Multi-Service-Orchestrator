[program:project1]
directory=/opt/services/service-a
; Allow overriding command and port via env vars
; Defaults to FastAPI: uvicorn app:app on SERVICE_A_PORT (8080)
command=/bin/sh -c "${SERVICE_A_CMD:-uvicorn app:app --host 0.0.0.0 --port ${SERVICE_A_PORT:-8080}}"
user=svc_a
environment=HOME="/home/svc_a",TMPDIR="/tmp/project1-tmp",XDG_CACHE_HOME="/tmp/project1-cache"
umask=0027
autostart=true
; Do not restart if manually stopped; only if it exits unexpectedly
autorestart=unexpected
startsecs=8
startretries=3
; Ensure entire process group is terminated cleanly
stopsignal=TERM
stopwaitsecs=15
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0

[program:project2]
directory=/opt/services/service-b
; Allow overriding command and port via env vars
; Defaults to Node: node server.js on SERVICE_B_PORT (9090)
command=/bin/sh -c "${SERVICE_B_CMD:-PORT=${SERVICE_B_PORT:-9090} node server.js}"
user=svc_b
environment=HOME="/home/svc_b",TMPDIR="/tmp/project2-tmp",XDG_CACHE_HOME="/tmp/project2-cache"
umask=0027
autostart=true
; Do not restart if manually stopped; only if it exits unexpectedly
autorestart=unexpected
startsecs=8
startretries=3
; Ensure entire process group is terminated cleanly
stopsignal=TERM
stopwaitsecs=15
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
